import{_ as c,M as t,p as l,q as i,R as n,N as a,V as e,t as s,a1 as r}from"./framework-7e1a102e.js";const u={},k={class:"table-of-contents"},d=r(`<p>[toc]</p><h1 id="iview-实现可编辑表格" tabindex="-1"><a class="header-anchor" href="#iview-实现可编辑表格" aria-hidden="true">#</a> iView 实现可编辑表格</h1><blockquote><p>create at： 2019-02-20</p></blockquote><h2 id="组件" tabindex="-1"><a class="header-anchor" href="#组件" aria-hidden="true">#</a> 组件</h2><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i-table</span> <span class="token attr-name">highlight-row</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentRowTable<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:columns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>columns<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i-table</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>实现方式：</p><ul><li>记录当前需要编辑的列的id，默认为空</li><li>需要编辑的列与当前需要编辑的id进行匹配，成功则将该列渲染为包含input标签组件，并绑定input事件</li></ul><h2 id="数据处理" tabindex="-1"><a class="header-anchor" href="#数据处理" aria-hidden="true">#</a> 数据处理</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">currentId</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">currentScore</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;名称&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;班级&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
                <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> score <span class="token punctuation">}</span> <span class="token operator">=</span> p<span class="token punctuation">.</span>row
                    <span class="token keyword">const</span> inp <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">&#39;30%&#39;</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&#39;4px 2px&#39;</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token string">&#39;4px&#39;</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&#39;1px solid #e9eaec&#39;</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">textAlign</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">maxlength</span><span class="token operator">:</span> <span class="token number">16</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">domProps</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">value</span><span class="token operator">:</span> score
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">on</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token function-variable function">input</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                            <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentId <span class="token operator">===</span> p<span class="token punctuation">.</span>row<span class="token punctuation">.</span>id <span class="token operator">?</span> inp <span class="token operator">:</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;span&#39;</span><span class="token punctuation">,</span> score<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;操作&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">,</span>
                <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> currentId <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> p<span class="token punctuation">.</span>row
                    <span class="token keyword">const</span> btnEdit <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;i-button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">on</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                            <span class="token keyword">this</span><span class="token punctuation">.</span>currentId <span class="token operator">=</span> id
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;编辑&#39;</span><span class="token punctuation">)</span>

                    <span class="token keyword">const</span> btnSaveCancel <span class="token operator">=</span> <span class="token punctuation">[</span>
                        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;i-button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                            <span class="token literal-property property">on</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSave</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;保存&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;i-button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                            <span class="token literal-property property">on</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                                <span class="token keyword">this</span><span class="token punctuation">.</span>currentId <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
                                <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
                            <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;取消&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                    <span class="token keyword">return</span> currentId <span class="token operator">===</span> id <span class="token operator">?</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span> btnSaveCancel<span class="token punctuation">)</span> <span class="token operator">:</span> btnEdit
                <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">tableData</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">score</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">score</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">handleSave</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span>currentScore<span class="token punctuation">,</span> tableData<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> tableData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> v<span class="token punctuation">.</span>id <span class="token operator">===</span> id <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token operator">...</span>v<span class="token punctuation">,</span> <span class="token literal-property property">score</span><span class="token operator">:</span> currentScore <span class="token punctuation">}</span> <span class="token operator">:</span> v
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>currentId <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>currentScore <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意： 如果采用的是在 head 标签中引入 iView，该方法在项目中会失效；通过编译开发的项目可行；</p>`,10),v={href:"https://github.com/WarrenHewitt/blog/issues",target:"_blank",rel:"noopener noreferrer"};function b(m,y){const p=t("router-link"),o=t("ExternalLinkIcon");return l(),i("div",null,[n("nav",k,[n("ul",null,[n("li",null,[a(p,{to:"#组件"},{default:e(()=>[s("组件")]),_:1})]),n("li",null,[a(p,{to:"#数据处理"},{default:e(()=>[s("数据处理")]),_:1})])])]),d,n("blockquote",null,[n("p",null,[s("欢迎交流 "),n("a",v,[s("Github"),a(o)])])])])}const g=c(u,[["render",b],["__file","iviewTableEdit.html.vue"]]);export{g as default};
