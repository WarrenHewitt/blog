import{_ as e,p as a,q as n,Q as s,a1 as c}from"./framework-7e1a102e.js";const i={},d=c(`<h1 id="npm-包制作和发布" tabindex="-1"><a class="header-anchor" href="#npm-包制作和发布" aria-hidden="true">#</a> npm 包制作和发布</h1><p>如果是应用包 推荐 webpack</p><p>纯js库 推荐 rollup</p><h2 id="js库包" tabindex="-1"><a class="header-anchor" href="#js库包" aria-hidden="true">#</a> js库包</h2><p>编写代码，在 package.json main 属性配置好 出口文件 默认根目录下的 index.js</p><p>如果是ts代码编写，需要编译成 js 导出</p><h2 id="centos-安装-verdaccio" tabindex="-1"><a class="header-anchor" href="#centos-安装-verdaccio" aria-hidden="true">#</a> centos 安装 verdaccio</h2><p>安装 node</p><p>安装 <code>npm i -g verdaccio</code></p><p>添加配置 如 listen</p><p>启动 <code>verdaccio</code></p><p>安装 <code>npm install -g pm2 --unsafe-perm</code></p><p>pm2 监控 <code>pm2 start verdaccio</code> 会在执行该命令的文件夹下 创建 storage 和 verdaccio(放配置文件，和发布的包，删除包可以在这里直接删) 文件夹</p><p>可以通过 pm2 日志 查看 verdaccio 输出信息</p><h2 id="npm-内部私包发布" tabindex="-1"><a class="header-anchor" href="#npm-内部私包发布" aria-hidden="true">#</a> npm 内部私包发布</h2><p>对比一系列方式后决定采用 <code>Verdaccio</code></p><ol><li>安装: <code>yarn global add verdaccio</code></li><li>启动: <code>verdaccio</code> // 任意目录可启动,启动后会输出一些信息, 以及在启动的文件夹下生成 storage 文件夹</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>warn --- config file // 后面跟的配置文件地址
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li><p>创建用户 命令行运行 <code>npm adduser --registry http://localhost(或者IP):4873</code> 会要求输入用户名、密码、邮箱</p></li><li><p>切换到私有仓库源，登录 或者直接设置要登录的源 <code>npm login --registry=https://registry.company-name.npme.io</code> 仓库地址请更换 这里登录上一步创建的用户</p></li><li><p>在开发完成的项目中运行 <code>npm publish --registry=http://localhost:4873/</code> 来将当前项目发布到指定源，发布前需要先登录</p></li><li><p>在项目中安装 npm install --registry=xx 或 yarn add --registry=xx</p></li></ol><h2 id="verdaccio-配置文件" tabindex="-1"><a class="header-anchor" href="#verdaccio-配置文件" aria-hidden="true">#</a> verdaccio 配置文件</h2><p><code>config.yaml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">storage</span><span class="token punctuation">:</span> ./storage <span class="token comment"># 已发布的包的存储位置，默认存储在 ~/.config/Verdaccio/ 文件夹下</span>
<span class="token key atrule">plugins</span><span class="token punctuation">:</span> ./plugins <span class="token comment"># 插件所在的目录</span>

<span class="token key atrule">listen</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> 0.0.0.0<span class="token punctuation">:</span><span class="token number">4873</span> <span class="token comment"># listen on all addresses (INADDR_ANY) 如果用ip访问需要加该配置</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22);function o(p,t){return a(),n("div",null,[s(`
 * @LastEditTime: 2022-11-07 11:26:13
`),d])}const l=e(i,[["render",o],["__file","publishNpm.html.vue"]]);export{l as default};
