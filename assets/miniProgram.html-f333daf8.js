import{_ as i,M as p,p as c,q as u,R as n,N as s,V as t,t as a,a1 as o}from"./framework-7e1a102e.js";const r={},d={class:"table-of-contents"},v=o(`<p>[toc]</p><hr><h2 id="微信小程序" tabindex="-1"><a class="header-anchor" href="#微信小程序" aria-hidden="true">#</a> 微信小程序</h2><ul><li><p>wx:key 代表在 for 循环的 array 中 item 的某个 property</p></li><li><p>project.config.json 项目配置 详见 工具 -&gt; 项目配置文件</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
	&quot;miniprogramRoot&quot;: &quot;miniprogram/&quot;, 小程序源代码文件夹
	&quot;cloudfunctionRoot&quot;: &quot;cloudfunctions/&quot;, 云开发的目录
  &quot;miniprogram&quot;: {  // 添加的编译模式 
      &quot;list&quot;: []
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><ul><li><p><code>background-image: url(base64 | http-url)</code> 不支持使用本地图片地址</p></li><li><p>.wxss 文件中 <code>page{ background: #fff }</code> 默认有个 page 标签 可设置当前页的页面背景色等</p></li><li><p>单位最好用 rpx 1px = 2rpx</p></li><li><p>页面跳转</p><ul><li><code>wx.reLaunch({ url: &#39;test?id=1&#39; })</code> 关闭所有页面，打开到应用内的某个页面</li><li><code>wx.navigateTo({ url: &#39;path?a=1&amp;b=2&#39; })</code> 保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面, 参数也是跟在url后面</li></ul></li><li><p>image 标签 要设置高度 否则图片不会显示 图片地址可以动态加载</p></li></ul><h3 id="遇到的问题" tabindex="-1"><a class="header-anchor" href="#遇到的问题" aria-hidden="true">#</a> 遇到的问题</h3><ul><li><p>自定义弹窗防止底层内容滑动添加事件 catchtouchmove=&quot;catchMove&quot; catchMove 是空函数即可</p></li><li><p>touch 相关事件返回的 <code>touches</code> 和 <code>changedTouches</code> 前者表示停留在屏幕上时的点信息，后者表示在屏幕上移动变化时的点信息；touchmove 和 touchend 优选后者，否者某些情况无法获取点位信息</p></li></ul><h3 id="app-js" tabindex="-1"><a class="header-anchor" href="#app-js" aria-hidden="true">#</a> app.js</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">onLaunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
      onLaunch和onLoad是异步的，当小程序启动时触发onLaunch，但是同时也在触发所进入页面的onLoad，所以会造成进去页面时在onLoad里不会拿到由onLaunch获取的值
    */</span>
   <span class="token comment">// 异步请求方法</span>
   <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pageCallback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 表明页面提前执行了，没有拿到值</span>
        <span class="token comment">// 该方法是在页面中没拿到值时添加</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pageCallback</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/* 页面中 */</span>
<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 判断是否有onLaunch获取到的值，有就继续执行 没有就添加如下回调</span>
  app<span class="token punctuation">.</span><span class="token function-variable function">pageCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 业务处理</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="事件" tabindex="-1"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h3><p>https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html</p><ul><li>传递参数只能用 data-xx=&quot;&quot; 形式的自定义参数 不能直接在绑定的内联函数上传递(和vue不同); 参考 /mini-programe 小程序的 content 模块</li></ul><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onGetData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">data-status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">onGetData</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">,</span> <span class="token comment">// 事件绑定的那个元素上的数据 data1</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset <span class="token comment">// 触发事件的那个元素 data2</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>detail 自定义事件所携带的数据；dialog组件的取消和确认操作的表示放在detail中</li></ul><h3 id="wxml" tabindex="-1"><a class="header-anchor" href="#wxml" aria-hidden="true">#</a> wxml</h3><ul><li><p><code>wx:key=&quot;index&quot;</code></p></li><li><p>获取元素 <code>wx.createSelectorQuery()</code> 注意在自定义组件或包含自定义组件的页面中，应使用 <code>this.createSelectorQuery()</code> 来代替</p></li></ul><h3 id="页面配置" tabindex="-1"><a class="header-anchor" href="#页面配置" aria-hidden="true">#</a> 页面配置</h3><p>https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html#%E9%85%8D%E7%BD%AE%E9%A1%B9</p><p>单个页面的 .json 文件</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;页面顶部标题&quot;</span> 如果没有正常显示，检查app.json中是否有这个页面
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>每个页面顶部标题也可以动态修改 <code>wx.setNavigationBarTitle({ title: &#39;&#39; })</code></p></li><li><p>每个页面顶部的 Bar 样式修改 setNavigationBarColor</p></li></ul><h3 id="页面周期函数" tabindex="-1"><a class="header-anchor" href="#页面周期函数" aria-hidden="true">#</a> 页面周期函数</h3><p>https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html</p><ul><li><p>onHide wx.navigateTo 或底部 tab 切换到其他页面</p></li><li><p>onUnload wx.redirectTo或wx.navigateBack到其他页面时</p></li></ul><h3 id="app-json-全局配置" tabindex="-1"><a class="header-anchor" href="#app-json-全局配置" aria-hidden="true">#</a> app.json 全局配置</h3><ul><li><p>创建页面：可以直接在app.json 中先配置好页面路径及名称，保存时，编辑器自动创建文件</p></li><li><p>pages 数组的第一个值为小程序的首页</p></li><li><p>配置底部菜单 tabBar</p></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v2&quot;</span> <span class="token comment">// 使用最新版样式  </span>
  <span class="token string-property property">&quot;useExtendedLib&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;kbone&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 引入 kbone</span>
      <span class="token string-property property">&quot;weui&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 引入 weUI</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 使用位置等相关信息 要先授权</span>
  <span class="token string-property property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;scope.userLocation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你的位置信息将用于小程序展示&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><ul><li>page.json 页面配置</li></ul><h3 id="wxs" tabindex="-1"><a class="header-anchor" href="#wxs" aria-hidden="true">#</a> WXS</h3><p>.wxs 文件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token string">&#39; &#39;</span> <span class="token operator">+</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> a<span class="token punctuation">,</span> <span class="token literal-property property">fn</span><span class="token operator">:</span> fn <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- module的值为，调用时的名称 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./test.wxs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>调用 wxs 方法结果:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{ ts.fn(&#39;world&#39;) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="npm-相关" tabindex="-1"><a class="header-anchor" href="#npm-相关" aria-hidden="true">#</a> npm 相关</h3>`,37),m=n("li",null,"注意是在 miniprogramRoot 规定的文件夹下安装",-1),k=n("li",null,"安装了包之后，点击开发者工具中的菜单栏：工具 --> 构建 npm ；目的是将 node_modules 中的包移植到 miniprogram_npm 中",-1),h={href:"https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html?search-key=npm",target:"_blank",rel:"noopener noreferrer"},b=o(`<h4 id="第三方包" tabindex="-1"><a class="header-anchor" href="#第三方包" aria-hidden="true">#</a> 第三方包</h4><ul><li>组件 vant-weapp</li></ul><h3 id="生命周期函数" tabindex="-1"><a class="header-anchor" href="#生命周期函数" aria-hidden="true">#</a> 生命周期函数</h3><p>执行顺序： onLoad -&gt; onShow -&gt; onReady</p><h3 id="组件内引用全局样式" tabindex="-1"><a class="header-anchor" href="#组件内引用全局样式" aria-hidden="true">#</a> 组件内引用全局样式</h3><p>组件js文件，设置以下项</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Component({
  options: {
    styleIsolation: &#39;apply-shared&#39;
  }
})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="computed" tabindex="-1"><a class="header-anchor" href="#computed" aria-hidden="true">#</a> computed</h3><ul><li>先安装 miniprogram-computed 安装后 computed 和 watch 都可用</li></ul><h3 id="behaviors" tabindex="-1"><a class="header-anchor" href="#behaviors" aria-hidden="true">#</a> behaviors</h3><p>用于组件间代码共享的特性，类似于一些编程语言中的“mixins”</p><h3 id="canvas-相关" tabindex="-1"><a class="header-anchor" href="#canvas-相关" aria-hidden="true">#</a> canvas 相关</h3><ul><li><p>ctx.draw(true); 参数为true则保留当前画布上的内容，进行绘制</p></li><li><p>touches[0].x 在canvas中返回的是相对于canvas的x值</p></li></ul><h3 id="收录提示" tabindex="-1"><a class="header-anchor" href="#收录提示" aria-hidden="true">#</a> 收录提示</h3><ul><li><code>根据 sitemap 的规则[0]，当前页面 [pages/menu/menu] 将被索引</code><ul><li>这个并不是报错，他只是一个提示，提示开发者哪些页面被微信收录了。代表这个页面可以在微信的搜索中被搜到</li><li>可以在项目配置中设置 <code>checkSiteMap：false</code> 将其关闭 sitemap.json</li></ul></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  &quot;rules&quot;:[{
    &quot;action&quot;: &quot;allow&quot;,
    &quot;page&quot;: &quot;path/xx/xx&quot;
  }, {
    &quot;action&quot;: &quot;disallow&quot;,
    &quot;page&quot;: &quot;*&quot;
  }]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16);function g(x,q){const e=p("router-link"),l=p("ExternalLinkIcon");return c(),u("div",null,[n("nav",d,[n("ul",null,[n("li",null,[s(e,{to:"#微信小程序"},{default:t(()=>[a("微信小程序")]),_:1}),n("ul",null,[n("li",null,[s(e,{to:"#遇到的问题"},{default:t(()=>[a("遇到的问题")]),_:1})]),n("li",null,[s(e,{to:"#app-js"},{default:t(()=>[a("app.js")]),_:1})]),n("li",null,[s(e,{to:"#事件"},{default:t(()=>[a("事件")]),_:1})]),n("li",null,[s(e,{to:"#wxml"},{default:t(()=>[a("wxml")]),_:1})]),n("li",null,[s(e,{to:"#页面配置"},{default:t(()=>[a("页面配置")]),_:1})]),n("li",null,[s(e,{to:"#页面周期函数"},{default:t(()=>[a("页面周期函数")]),_:1})]),n("li",null,[s(e,{to:"#app-json-全局配置"},{default:t(()=>[a("app.json 全局配置")]),_:1})]),n("li",null,[s(e,{to:"#wxs"},{default:t(()=>[a("WXS")]),_:1})]),n("li",null,[s(e,{to:"#npm-相关"},{default:t(()=>[a("npm 相关")]),_:1})]),n("li",null,[s(e,{to:"#生命周期函数"},{default:t(()=>[a("生命周期函数")]),_:1})]),n("li",null,[s(e,{to:"#组件内引用全局样式"},{default:t(()=>[a("组件内引用全局样式")]),_:1})]),n("li",null,[s(e,{to:"#computed"},{default:t(()=>[a("computed")]),_:1})]),n("li",null,[s(e,{to:"#behaviors"},{default:t(()=>[a("behaviors")]),_:1})]),n("li",null,[s(e,{to:"#canvas-相关"},{default:t(()=>[a("canvas 相关")]),_:1})]),n("li",null,[s(e,{to:"#收录提示"},{default:t(()=>[a("收录提示")]),_:1})])])])])]),v,n("ul",null,[m,k,n("li",null,[a("更多看： "),n("a",h,[a("npm 支持"),s(l)])])]),b])}const w=i(r,[["render",g],["__file","miniProgram.html.vue"]]);export{w as default};
