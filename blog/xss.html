<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.58">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/blog/favicon.ico"><title>XSS(cross-site scripting) 跨站脚本攻击 | Warren's</title><meta name="description" content="blog & note">
    <link rel="preload" href="/blog/assets/style-e5c53882.css" as="style"><link rel="stylesheet" href="/blog/assets/style-e5c53882.css">
    <link rel="modulepreload" href="/blog/assets/app-502c1dea.js"><link rel="modulepreload" href="/blog/assets/framework-7e1a102e.js"><link rel="modulepreload" href="/blog/assets/xss.html-f147f75a.js"><link rel="modulepreload" href="/blog/assets/xss.html-b5643b40.js"><link rel="prefetch" href="/blog/assets/index.html-45c5021c.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-d3d1fca1.js" as="script"><link rel="prefetch" href="/blog/assets/arrayBuffer.html-08db0ad4.js" as="script"><link rel="prefetch" href="/blog/assets/axios.html-8b351322.js" as="script"><link rel="prefetch" href="/blog/assets/bigDataWithFd.html-ec79fa10.js" as="script"><link rel="prefetch" href="/blog/assets/canvas.html-ee702fbf.js" as="script"><link rel="prefetch" href="/blog/assets/codepen.html-b8979dc4.js" as="script"><link rel="prefetch" href="/blog/assets/cssHeart.html-01e04d7c.js" as="script"><link rel="prefetch" href="/blog/assets/designPattern.html-d4b814f6.js" as="script"><link rel="prefetch" href="/blog/assets/dragDropPreview.html-55bd7ef1.js" as="script"><link rel="prefetch" href="/blog/assets/dragMoveElement.html-f54bbe89.js" as="script"><link rel="prefetch" href="/blog/assets/drawBoard.html-75b96584.js" as="script"><link rel="prefetch" href="/blog/assets/examination.html-5965a0a8.js" as="script"><link rel="prefetch" href="/blog/assets/exportDownloadFile.html-9fae7821.js" as="script"><link rel="prefetch" href="/blog/assets/generator.html-03dd0128.js" as="script"><link rel="prefetch" href="/blog/assets/githubHexo.html-273fb6a1.js" as="script"><link rel="prefetch" href="/blog/assets/handWrite.html-a35ae54f.js" as="script"><link rel="prefetch" href="/blog/assets/hBuilderiPhone.html-d260e3c5.js" as="script"><link rel="prefetch" href="/blog/assets/hkVideo.html-95c91c98.js" as="script"><link rel="prefetch" href="/blog/assets/html5device.html-bd3ad972.js" as="script"><link rel="prefetch" href="/blog/assets/hybridApp.html-7f133348.js" as="script"><link rel="prefetch" href="/blog/assets/indexedDB.html-ef54b406.js" as="script"><link rel="prefetch" href="/blog/assets/onlineView.html-cd963ccc.js" as="script"><link rel="prefetch" href="/blog/assets/print.html-9cb2740d.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-90f36e57.js" as="script"><link rel="prefetch" href="/blog/assets/requestAnimationFrame.html-6b0184b8.js" as="script"><link rel="prefetch" href="/blog/assets/scrollbar.html-e92bb7f1.js" as="script"><link rel="prefetch" href="/blog/assets/singlePageRoute.html-2212cd3a.js" as="script"><link rel="prefetch" href="/blog/assets/toastAndLoading.html-0c92d30b.js" as="script"><link rel="prefetch" href="/blog/assets/verticalRoll.html-4ea08146.js" as="script"><link rel="prefetch" href="/blog/assets/weChatGetUserInfo.html-dd277f50.js" as="script"><link rel="prefetch" href="/blog/assets/weChatShare.html-afa8e92e.js" as="script"><link rel="prefetch" href="/blog/assets/dbserver.html-66b0c117.js" as="script"><link rel="prefetch" href="/blog/assets/mysqlMongo.html-180fa67b.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-c2912b8f.js" as="script"><link rel="prefetch" href="/blog/assets/commitLint.html-e802645f.js" as="script"><link rel="prefetch" href="/blog/assets/eslintPrettier.html-21328deb.js" as="script"><link rel="prefetch" href="/blog/assets/generatorTemplate.html-246d1620.js" as="script"><link rel="prefetch" href="/blog/assets/git.html-6c83537f.js" as="script"><link rel="prefetch" href="/blog/assets/markdown.html-d05d5a45.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9812bc3f.js" as="script"><link rel="prefetch" href="/blog/assets/rollup.html-c373089b.js" as="script"><link rel="prefetch" href="/blog/assets/vite.html-a71e7561.js" as="script"><link rel="prefetch" href="/blog/assets/vueConfig.html-f2a0b992.js" as="script"><link rel="prefetch" href="/blog/assets/webpack.html-0fc6e371.js" as="script"><link rel="prefetch" href="/blog/assets/webpackConfig.html-7c1837e5.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-b18e8647.js" as="script"><link rel="prefetch" href="/blog/assets/bat.html-b9f7a019.js" as="script"><link rel="prefetch" href="/blog/assets/commandLine.html-b31729ab.js" as="script"><link rel="prefetch" href="/blog/assets/deployChanDao.html-3d08ccb0.js" as="script"><link rel="prefetch" href="/blog/assets/docker.html-145c60f3.js" as="script"><link rel="prefetch" href="/blog/assets/jenkins.html-618da2cd.js" as="script"><link rel="prefetch" href="/blog/assets/linux.html-875012af.js" as="script"><link rel="prefetch" href="/blog/assets/mobaXterm.html-cedca4f5.js" as="script"><link rel="prefetch" href="/blog/assets/nginx.html-5f699cd9.js" as="script"><link rel="prefetch" href="/blog/assets/psISE.html-5584f001.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-f3553278.js" as="script"><link rel="prefetch" href="/blog/assets/shell.html-e9a82822.js" as="script"><link rel="prefetch" href="/blog/assets/vMware.html-17dd6d61.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-dbc1c2eb.js" as="script"><link rel="prefetch" href="/blog/assets/softwareChrome.html-5db4feae.js" as="script"><link rel="prefetch" href="/blog/assets/softwareUsage.html-641f02ef.js" as="script"><link rel="prefetch" href="/blog/assets/softwareVSCode.html-9a1fce31.js" as="script"><link rel="prefetch" href="/blog/assets/windowsLinuxMac.html-ca12052b.js" as="script"><link rel="prefetch" href="/blog/assets/algorithm.html-ace6fa6e.js" as="script"><link rel="prefetch" href="/blog/assets/array.html-7000bc43.js" as="script"><link rel="prefetch" href="/blog/assets/browser.html-d46994b7.js" as="script"><link rel="prefetch" href="/blog/assets/dataRequest.html-9606bd1b.js" as="script"><link rel="prefetch" href="/blog/assets/debounceThrottle.html-5cca1d45.js" as="script"><link rel="prefetch" href="/blog/assets/diff.html-4711bfc3.js" as="script"><link rel="prefetch" href="/blog/assets/element.html-38e613fc.js" as="script"><link rel="prefetch" href="/blog/assets/number.html-103e74d2.js" as="script"><link rel="prefetch" href="/blog/assets/object.html-911f1fca.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-a0579fea.js" as="script"><link rel="prefetch" href="/blog/assets/sort.html-4d3e11d1.js" as="script"><link rel="prefetch" href="/blog/assets/string.html-92214675.js" as="script"><link rel="prefetch" href="/blog/assets/time.html-6d692571.js" as="script"><link rel="prefetch" href="/blog/assets/application.html-f57a66ee.js" as="script"><link rel="prefetch" href="/blog/assets/comment.html-93bdd8ea.js" as="script"><link rel="prefetch" href="/blog/assets/dependency.html-e9bbeae0.js" as="script"><link rel="prefetch" href="/blog/assets/grammar.html-587f2eb4.js" as="script"><link rel="prefetch" href="/blog/assets/idea.html-4bf6f73a.js" as="script"><link rel="prefetch" href="/blog/assets/ideaPlugin.html-7184643b.js" as="script"><link rel="prefetch" href="/blog/assets/javaBaseClass.html-bf1c6b6a.js" as="script"><link rel="prefetch" href="/blog/assets/learnNote.html-d5ec1413.js" as="script"><link rel="prefetch" href="/blog/assets/pom.html-49b2a9fc.js" as="script"><link rel="prefetch" href="/blog/assets/problem.html-1201fed1.js" as="script"><link rel="prefetch" href="/blog/assets/springBoot.html-a1db9209.js" as="script"><link rel="prefetch" href="/blog/assets/springBootGrammar.html-546242ac.js" as="script"><link rel="prefetch" href="/blog/assets/accessOrigin.html-cf99ff3e.js" as="script"><link rel="prefetch" href="/blog/assets/eggStart.html-245be0b3.js" as="script"><link rel="prefetch" href="/blog/assets/koaUploadImg.html-a10d255e.js" as="script"><link rel="prefetch" href="/blog/assets/moveFileOrfolder.html-200c755b.js" as="script"><link rel="prefetch" href="/blog/assets/node.html-c8838320.js" as="script"><link rel="prefetch" href="/blog/assets/npm.html-88bdadcf.js" as="script"><link rel="prefetch" href="/blog/assets/package.html-e281eb66.js" as="script"><link rel="prefetch" href="/blog/assets/publishNpm.html-d3e8c5bf.js" as="script"><link rel="prefetch" href="/blog/assets/setAutoIp.html-8a8cb6e8.js" as="script"><link rel="prefetch" href="/blog/assets/yarn.html-1e5fbb49.js" as="script"><link rel="prefetch" href="/blog/assets/python.html-562e59fc.js" as="script"><link rel="prefetch" href="/blog/assets/scrapyStart.html-e26738ff.js" as="script"><link rel="prefetch" href="/blog/assets/animate.html-1c05455d.js" as="script"><link rel="prefetch" href="/blog/assets/css.html-98808ff9.js" as="script"><link rel="prefetch" href="/blog/assets/eCharts.html-65484a65.js" as="script"><link rel="prefetch" href="/blog/assets/electron.html-db8c5208.js" as="script"><link rel="prefetch" href="/blog/assets/flutter.html-1a5ff9cc.js" as="script"><link rel="prefetch" href="/blog/assets/html.html-369935d7.js" as="script"><link rel="prefetch" href="/blog/assets/media.html-6dc0e008.js" as="script"><link rel="prefetch" href="/blog/assets/miniProgram.html-0bc37128.js" as="script"><link rel="prefetch" href="/blog/assets/sass.html-e07a829f.js" as="script"><link rel="prefetch" href="/blog/assets/svg.html-78442843.js" as="script"><link rel="prefetch" href="/blog/assets/uniApp.html-976b3fbe.js" as="script"><link rel="prefetch" href="/blog/assets/webApp.html-241abe07.js" as="script"><link rel="prefetch" href="/blog/assets/array.html-e60b2f48.js" as="script"><link rel="prefetch" href="/blog/assets/bitOperation.html-4614e58a.js" as="script"><link rel="prefetch" href="/blog/assets/class.html-b69c2e4d.js" as="script"><link rel="prefetch" href="/blog/assets/D3.html-197f158b.js" as="script"><link rel="prefetch" href="/blog/assets/javascript.html-5f040b71.js" as="script"><link rel="prefetch" href="/blog/assets/jsEvent.html-6fee49c6.js" as="script"><link rel="prefetch" href="/blog/assets/regexpRules.html-fcd383a9.js" as="script"><link rel="prefetch" href="/blog/assets/threeJs.html-56b2af0e.js" as="script"><link rel="prefetch" href="/blog/assets/typescript.html-26e71e4d.js" as="script"><link rel="prefetch" href="/blog/assets/elementUiTree.html-8ecb778f.js" as="script"><link rel="prefetch" href="/blog/assets/iviewTableEdit.html-4d7b1733.js" as="script"><link rel="prefetch" href="/blog/assets/iviewUdTableHeader.html-06cfbb6e.js" as="script"><link rel="prefetch" href="/blog/assets/react.html-3191cf8d.js" as="script"><link rel="prefetch" href="/blog/assets/reactExam.html-87fb0a11.js" as="script"><link rel="prefetch" href="/blog/assets/rnApp.html-5a3a4779.js" as="script"><link rel="prefetch" href="/blog/assets/vue.html-0d176f3b.js" as="script"><link rel="prefetch" href="/blog/assets/vue3.html-0b8be01b.js" as="script"><link rel="prefetch" href="/blog/assets/vueExam.html-0f73631a.js" as="script"><link rel="prefetch" href="/blog/assets/vueMvvm.html-03648994.js" as="script"><link rel="prefetch" href="/blog/assets/vueSassConfig.html-d0ab9f3a.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-3cff66df.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9a428296.js" as="script"><link rel="prefetch" href="/blog/assets/arrayBuffer.html-b0513557.js" as="script"><link rel="prefetch" href="/blog/assets/axios.html-6414521e.js" as="script"><link rel="prefetch" href="/blog/assets/bigDataWithFd.html-85e543de.js" as="script"><link rel="prefetch" href="/blog/assets/canvas.html-8b52e2c2.js" as="script"><link rel="prefetch" href="/blog/assets/codepen.html-1798db5a.js" as="script"><link rel="prefetch" href="/blog/assets/cssHeart.html-dbccd011.js" as="script"><link rel="prefetch" href="/blog/assets/designPattern.html-4f959435.js" as="script"><link rel="prefetch" href="/blog/assets/dragDropPreview.html-4817a3c5.js" as="script"><link rel="prefetch" href="/blog/assets/dragMoveElement.html-c4891909.js" as="script"><link rel="prefetch" href="/blog/assets/drawBoard.html-3919bd44.js" as="script"><link rel="prefetch" href="/blog/assets/examination.html-203f4415.js" as="script"><link rel="prefetch" href="/blog/assets/exportDownloadFile.html-070a1788.js" as="script"><link rel="prefetch" href="/blog/assets/generator.html-c668000b.js" as="script"><link rel="prefetch" href="/blog/assets/githubHexo.html-dd0a5c16.js" as="script"><link rel="prefetch" href="/blog/assets/handWrite.html-181f24f9.js" as="script"><link rel="prefetch" href="/blog/assets/hBuilderiPhone.html-ddef6884.js" as="script"><link rel="prefetch" href="/blog/assets/hkVideo.html-5101ca23.js" as="script"><link rel="prefetch" href="/blog/assets/html5device.html-3fa84554.js" as="script"><link rel="prefetch" href="/blog/assets/hybridApp.html-1f3f4c1b.js" as="script"><link rel="prefetch" href="/blog/assets/indexedDB.html-b9b413b4.js" as="script"><link rel="prefetch" href="/blog/assets/onlineView.html-45f65166.js" as="script"><link rel="prefetch" href="/blog/assets/print.html-4a27f1ae.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-0ba3804f.js" as="script"><link rel="prefetch" href="/blog/assets/requestAnimationFrame.html-d8c9e87e.js" as="script"><link rel="prefetch" href="/blog/assets/scrollbar.html-fc17d032.js" as="script"><link rel="prefetch" href="/blog/assets/singlePageRoute.html-cc914081.js" as="script"><link rel="prefetch" href="/blog/assets/toastAndLoading.html-9ae019a1.js" as="script"><link rel="prefetch" href="/blog/assets/verticalRoll.html-f3726b0c.js" as="script"><link rel="prefetch" href="/blog/assets/weChatGetUserInfo.html-5306f4fb.js" as="script"><link rel="prefetch" href="/blog/assets/weChatShare.html-ca1dd79a.js" as="script"><link rel="prefetch" href="/blog/assets/dbserver.html-f818e0f5.js" as="script"><link rel="prefetch" href="/blog/assets/mysqlMongo.html-af41ddfe.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-cc96e842.js" as="script"><link rel="prefetch" href="/blog/assets/commitLint.html-8aaa786a.js" as="script"><link rel="prefetch" href="/blog/assets/eslintPrettier.html-d1e669f8.js" as="script"><link rel="prefetch" href="/blog/assets/generatorTemplate.html-7f1d9814.js" as="script"><link rel="prefetch" href="/blog/assets/git.html-e07181ed.js" as="script"><link rel="prefetch" href="/blog/assets/markdown.html-aa144d5d.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-f8a5137b.js" as="script"><link rel="prefetch" href="/blog/assets/rollup.html-f89b4e46.js" as="script"><link rel="prefetch" href="/blog/assets/vite.html-1dab33e6.js" as="script"><link rel="prefetch" href="/blog/assets/vueConfig.html-e119cacb.js" as="script"><link rel="prefetch" href="/blog/assets/webpack.html-cc2d5ac5.js" as="script"><link rel="prefetch" href="/blog/assets/webpackConfig.html-e9d96ec8.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-22df4bc3.js" as="script"><link rel="prefetch" href="/blog/assets/bat.html-b27de9cb.js" as="script"><link rel="prefetch" href="/blog/assets/commandLine.html-ddd36217.js" as="script"><link rel="prefetch" href="/blog/assets/deployChanDao.html-8e8fe684.js" as="script"><link rel="prefetch" href="/blog/assets/docker.html-2092a2be.js" as="script"><link rel="prefetch" href="/blog/assets/jenkins.html-69e074a1.js" as="script"><link rel="prefetch" href="/blog/assets/linux.html-7aa86476.js" as="script"><link rel="prefetch" href="/blog/assets/mobaXterm.html-d7b8f6fc.js" as="script"><link rel="prefetch" href="/blog/assets/nginx.html-c4b0f397.js" as="script"><link rel="prefetch" href="/blog/assets/psISE.html-a9eb32ce.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-fa28656e.js" as="script"><link rel="prefetch" href="/blog/assets/shell.html-1d705648.js" as="script"><link rel="prefetch" href="/blog/assets/vMware.html-560b1f22.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-ee8c2857.js" as="script"><link rel="prefetch" href="/blog/assets/softwareChrome.html-df55088b.js" as="script"><link rel="prefetch" href="/blog/assets/softwareUsage.html-f07a419b.js" as="script"><link rel="prefetch" href="/blog/assets/softwareVSCode.html-b1003b8a.js" as="script"><link rel="prefetch" href="/blog/assets/windowsLinuxMac.html-797ab186.js" as="script"><link rel="prefetch" href="/blog/assets/algorithm.html-975f0c89.js" as="script"><link rel="prefetch" href="/blog/assets/array.html-b3f49325.js" as="script"><link rel="prefetch" href="/blog/assets/browser.html-352ba5bf.js" as="script"><link rel="prefetch" href="/blog/assets/dataRequest.html-7971126a.js" as="script"><link rel="prefetch" href="/blog/assets/debounceThrottle.html-406a98a9.js" as="script"><link rel="prefetch" href="/blog/assets/diff.html-5040ea2a.js" as="script"><link rel="prefetch" href="/blog/assets/element.html-767d09c5.js" as="script"><link rel="prefetch" href="/blog/assets/number.html-5de7496f.js" as="script"><link rel="prefetch" href="/blog/assets/object.html-9c046897.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-b77dc812.js" as="script"><link rel="prefetch" href="/blog/assets/sort.html-f8a48e91.js" as="script"><link rel="prefetch" href="/blog/assets/string.html-c883d3bd.js" as="script"><link rel="prefetch" href="/blog/assets/time.html-1e1d17bc.js" as="script"><link rel="prefetch" href="/blog/assets/application.html-b46d61c2.js" as="script"><link rel="prefetch" href="/blog/assets/comment.html-01dd9822.js" as="script"><link rel="prefetch" href="/blog/assets/dependency.html-2d012f84.js" as="script"><link rel="prefetch" href="/blog/assets/grammar.html-55fc71d9.js" as="script"><link rel="prefetch" href="/blog/assets/idea.html-3ee891e6.js" as="script"><link rel="prefetch" href="/blog/assets/ideaPlugin.html-a0feebc5.js" as="script"><link rel="prefetch" href="/blog/assets/javaBaseClass.html-43938738.js" as="script"><link rel="prefetch" href="/blog/assets/learnNote.html-6d4ba148.js" as="script"><link rel="prefetch" href="/blog/assets/pom.html-582b32aa.js" as="script"><link rel="prefetch" href="/blog/assets/problem.html-de74211e.js" as="script"><link rel="prefetch" href="/blog/assets/springBoot.html-d5aa0922.js" as="script"><link rel="prefetch" href="/blog/assets/springBootGrammar.html-9680a4d1.js" as="script"><link rel="prefetch" href="/blog/assets/accessOrigin.html-4947f6f8.js" as="script"><link rel="prefetch" href="/blog/assets/eggStart.html-a8ff8ee3.js" as="script"><link rel="prefetch" href="/blog/assets/koaUploadImg.html-b90254d4.js" as="script"><link rel="prefetch" href="/blog/assets/moveFileOrfolder.html-2217452f.js" as="script"><link rel="prefetch" href="/blog/assets/node.html-5fcfd654.js" as="script"><link rel="prefetch" href="/blog/assets/npm.html-d139f26c.js" as="script"><link rel="prefetch" href="/blog/assets/package.html-c784daa5.js" as="script"><link rel="prefetch" href="/blog/assets/publishNpm.html-aa1ea748.js" as="script"><link rel="prefetch" href="/blog/assets/setAutoIp.html-2def12e9.js" as="script"><link rel="prefetch" href="/blog/assets/yarn.html-18e9c185.js" as="script"><link rel="prefetch" href="/blog/assets/python.html-5db87a96.js" as="script"><link rel="prefetch" href="/blog/assets/scrapyStart.html-c6605d36.js" as="script"><link rel="prefetch" href="/blog/assets/animate.html-40de1b07.js" as="script"><link rel="prefetch" href="/blog/assets/css.html-a24d20e4.js" as="script"><link rel="prefetch" href="/blog/assets/eCharts.html-fb40c143.js" as="script"><link rel="prefetch" href="/blog/assets/electron.html-d3761362.js" as="script"><link rel="prefetch" href="/blog/assets/flutter.html-b1a6c87a.js" as="script"><link rel="prefetch" href="/blog/assets/html.html-8bf0bba3.js" as="script"><link rel="prefetch" href="/blog/assets/media.html-762faeb3.js" as="script"><link rel="prefetch" href="/blog/assets/miniProgram.html-f333daf8.js" as="script"><link rel="prefetch" href="/blog/assets/sass.html-0a09a375.js" as="script"><link rel="prefetch" href="/blog/assets/svg.html-87d8cdb0.js" as="script"><link rel="prefetch" href="/blog/assets/uniApp.html-cd4e5795.js" as="script"><link rel="prefetch" href="/blog/assets/webApp.html-898ea287.js" as="script"><link rel="prefetch" href="/blog/assets/array.html-986ff2b5.js" as="script"><link rel="prefetch" href="/blog/assets/bitOperation.html-af41fd72.js" as="script"><link rel="prefetch" href="/blog/assets/class.html-3a0e3904.js" as="script"><link rel="prefetch" href="/blog/assets/D3.html-a4b8bf12.js" as="script"><link rel="prefetch" href="/blog/assets/javascript.html-3c3a55ea.js" as="script"><link rel="prefetch" href="/blog/assets/jsEvent.html-80d9520c.js" as="script"><link rel="prefetch" href="/blog/assets/regexpRules.html-0d11b377.js" as="script"><link rel="prefetch" href="/blog/assets/threeJs.html-379c5854.js" as="script"><link rel="prefetch" href="/blog/assets/typescript.html-4c56b884.js" as="script"><link rel="prefetch" href="/blog/assets/elementUiTree.html-efdf664e.js" as="script"><link rel="prefetch" href="/blog/assets/iviewTableEdit.html-10d7947e.js" as="script"><link rel="prefetch" href="/blog/assets/iviewUdTableHeader.html-3865e68e.js" as="script"><link rel="prefetch" href="/blog/assets/react.html-3011360f.js" as="script"><link rel="prefetch" href="/blog/assets/reactExam.html-19466daf.js" as="script"><link rel="prefetch" href="/blog/assets/rnApp.html-a2895e89.js" as="script"><link rel="prefetch" href="/blog/assets/vue.html-761f7219.js" as="script"><link rel="prefetch" href="/blog/assets/vue3.html-d4f002e9.js" as="script"><link rel="prefetch" href="/blog/assets/vueExam.html-1af23720.js" as="script"><link rel="prefetch" href="/blog/assets/vueMvvm.html-436da9bb.js" as="script"><link rel="prefetch" href="/blog/assets/vueSassConfig.html-aeb92c03.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-f9e8d259.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><img class="logo" src="/blog/logo.png" alt="Warren&#39;s"><span class="site-name can-hide">Warren&#39;s</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/frontEnd/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/backEnd/" class="" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/server/" class="" aria-label="服务器"><!--[--><!--]--> 服务器 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/tools/" class="" aria-label="工具方法"><!--[--><!--]--> 工具方法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/blog/" class="router-link-active" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/database/" class="" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/project/" class="" aria-label="项目配置"><!--[--><!--]--> 项目配置 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/software/" class="" aria-label="软件使用"><!--[--><!--]--> 软件使用 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/WarrenHewitt" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/frontEnd/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/backEnd/" class="" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/server/" class="" aria-label="服务器"><!--[--><!--]--> 服务器 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/tools/" class="" aria-label="工具方法"><!--[--><!--]--> 工具方法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/blog/" class="router-link-active" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/database/" class="" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/project/" class="" aria-label="项目配置"><!--[--><!--]--> 项目配置 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/software/" class="" aria-label="软件使用"><!--[--><!--]--> 软件使用 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/WarrenHewitt" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Blog <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/blog/arrayBuffer" class="sidebar-item" aria-label="Array-Buffer 用法与实践"><!--[--><!--]--> Array-Buffer 用法与实践 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/axios" class="sidebar-item" aria-label="axios"><!--[--><!--]--> axios <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/bigDataWithFd" class="sidebar-item" aria-label="大数据与前端"><!--[--><!--]--> 大数据与前端 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/canvas" class="sidebar-item" aria-label="canvas"><!--[--><!--]--> canvas <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/codepen" class="sidebar-item" aria-label="codepen 实例"><!--[--><!--]--> codepen 实例 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/cssHeart" class="sidebar-item" aria-label="用css 实现心形"><!--[--><!--]--> 用css 实现心形 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/designPattern" class="sidebar-item" aria-label="设计模式的理解与实现"><!--[--><!--]--> 设计模式的理解与实现 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/dragDropPreview" class="sidebar-item" aria-label="拖拽与拖拽文件上传以及预览"><!--[--><!--]--> 拖拽与拖拽文件上传以及预览 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/dragMoveElement" class="sidebar-item" aria-label="随意拖动内容位置的两种实现方式"><!--[--><!--]--> 随意拖动内容位置的两种实现方式 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/drawBoard" class="sidebar-item" aria-label="canvas画板多端实现"><!--[--><!--]--> canvas画板多端实现 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/examination" class="sidebar-item" aria-label="题目"><!--[--><!--]--> 题目 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/exportDownloadFile" class="sidebar-item" aria-label="导出Excel、PDF和下载图片、文件"><!--[--><!--]--> 导出Excel、PDF和下载图片、文件 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/generator" class="sidebar-item" aria-label="生成器"><!--[--><!--]--> 生成器 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/githubHexo" class="sidebar-item" aria-label="githubHexo"><!--[--><!--]--> githubHexo <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/handWrite" class="sidebar-item" aria-label="handWrite"><!--[--><!--]--> handWrite <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/hBuilderiPhone" class="sidebar-item" aria-label="hBuilderiPhone"><!--[--><!--]--> hBuilderiPhone <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/hkVideo" class="sidebar-item" aria-label="海康视频对接"><!--[--><!--]--> 海康视频对接 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/html5device" class="sidebar-item" aria-label="HTML5 设备访问"><!--[--><!--]--> HTML5 设备访问 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/hybridApp" class="sidebar-item" aria-label="hybridApp"><!--[--><!--]--> hybridApp <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/indexedDB" class="sidebar-item" aria-label="indexedDB"><!--[--><!--]--> indexedDB <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/onlineView" class="sidebar-item" aria-label="文件在线预览"><!--[--><!--]--> 文件在线预览 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/print" class="sidebar-item" aria-label="html 打印相关操作与实现"><!--[--><!--]--> html 打印相关操作与实现 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/requestAnimationFrame" class="sidebar-item" aria-label="requestAnimationFrame 兼容"><!--[--><!--]--> requestAnimationFrame 兼容 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/scrollbar" class="sidebar-item" aria-label="滚动条"><!--[--><!--]--> 滚动条 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/singlePageRoute" class="sidebar-item" aria-label="单文件路由"><!--[--><!--]--> 单文件路由 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/toastAndLoading" class="sidebar-item" aria-label="页面弹窗toast和加载loading"><!--[--><!--]--> 页面弹窗toast和加载loading <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/verticalRoll" class="sidebar-item" aria-label="元素内容垂直循环滚动"><!--[--><!--]--> 元素内容垂直循环滚动 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/weChatGetUserInfo" class="sidebar-item" aria-label="获取微信用户信息"><!--[--><!--]--> 获取微信用户信息 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/weChatShare" class="sidebar-item" aria-label="微信分享"><!--[--><!--]--> 微信分享 <!--[--><!--]--></a><!----></li><li><a href="/blog/blog/xss" class="router-link-active sidebar-item active" aria-label="xss"><!--[--><!--]--> xss <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="xss-cross-site-scripting-跨站脚本攻击" tabindex="-1"><a class="header-anchor" href="#xss-cross-site-scripting-跨站脚本攻击" aria-hidden="true">#</a> XSS(cross-site scripting) 跨站脚本攻击</h1><p>为了和 CSS 区分，这里把攻击的第一个字母改成了 X</p><h2 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h2><ol><li>属性值拼接</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token string">&quot;&gt;&lt;script&gt;console.log(&#39;xss&#39;);&lt;/script&gt;&quot;</span>
<span class="token comment">// 会执行console 不能直接复制到浏览器测试  会报错，要用输入的方式</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;value&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;xss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>&quot;<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>css攻击</li></ol><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/* 如果想用 @import  js 代码攻击  根据 w3c 规范 可以发起请求获取 js文件 但是问价不会执行 */</span>
<span class="token selector">input[type=password][value=&#39;1&#39;]</span> <span class="token punctuation">{</span> <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>xxx.com<span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">input[type=password]:valid</span> <span class="token punctuation">{</span> <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token comment">/* 经过多个css选择器匹配 就大概知道密码组合 */</span>

<span class="token comment">/* 这里会根据上面匹配到的 value=1 然后就会去请求 xxx.com ; valid 和 pattern 是动态的匹配 输入框内容 */</span>
&lt;input type=<span class="token string">&quot;password&quot;</span> placeholder=<span class="token string">&quot;input&quot;</span> value=<span class="token string">&quot;1&quot;</span> pattern=<span class="token string">&quot;^a&quot;</span>&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="攻击分类" tabindex="-1"><a class="header-anchor" href="#攻击分类" aria-hidden="true">#</a> 攻击分类</h2><h3 id="dom型" tabindex="-1"><a class="header-anchor" href="#dom型" aria-hidden="true">#</a> DOM型</h3><p>构造恶意的 url -&gt; 用户打开 url -&gt; 浏览器收到响应，开始解析，js 取出 url 中的恶意代码并执行 -&gt; 窃取用户的信息，或者攻击网站接口等</p><p>属于前端安全漏洞</p><h3 id="存储型" tabindex="-1"><a class="header-anchor" href="#存储型" aria-hidden="true">#</a> 存储型</h3><p>攻击者将代码提交到目标网站的数据库中，像论坛这些，其他用户打开网站后，服务器将代码发送到页面，在浏览器端窃取用户信息发送到第三方</p><h3 id="反射型" tabindex="-1"><a class="header-anchor" href="#反射型" aria-hidden="true">#</a> 反射型</h3><p>构造出特殊 url（用户搜索的输入参数） 用户打开这个 url ，服务器将 url 中的代码拼接在html中返回，以此来获取用户信息</p><p>与存储型的区别在于，反射型是恶意代码存 url 里</p><h2 id="常见的注入方法" tabindex="-1"><a class="header-anchor" href="#常见的注入方法" aria-hidden="true">#</a> 常见的注入方法：</h2><ol><li>HTML 中内嵌的文本中，恶意内容以 script 标签形成注入</li><li>内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）</li><li>标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签</li><li>标签的 href、src 等属性中，包含 javascript: 等可执行代码</li><li>onload、onerror、onclick 等事件中，注入不受控制代码</li><li>style 属性和标签中，包含类似 background-image:url(&quot;javascript:...&quot;); 的代码（新版本浏览器已经可以防范）</li><li>style 属性和标签中，包含类似 expression(...) 的 CSS 表达式代码（新版本浏览器已经可以防范）</li></ol><h2 id="解决办法" tabindex="-1"><a class="header-anchor" href="#解决办法" aria-hidden="true">#</a> 解决办法</h2><ol><li>输入过滤 首先输入过滤并非十分可靠，如果转码，转码后，内容必须要确定使用在何处，否则显示时为转码 有可能出现乱码，比如 escapeHTML 转码的字符如果直接是放入到html 是没有问题的是可以直接显示的，但是放到 js 的变量赋值中 就可能会报错；但是对于明确的输入类型，还是非常有必要的，比如数字 url 电话等校验</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 两个第三方库</span>
<span class="token comment">// 1. xss https://github.com/leizongmin/js-xss/blob/master/README.zh.md</span>
<span class="token function">xss</span><span class="token punctuation">(</span><span class="token string">&#39;用户输入值&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 会将有问题的输入转义</span>
<span class="token comment">// 自定义白名单 其它的属性删除  stripIgnoreTagBody</span>
<span class="token punctuation">{</span>
  <span class="token comment">// whiteList: {}, // 指定白名单,如果要在默认的基础上添加一些其它的标签(如自定义标签)可以用 ，xss.whiteList 拿到默认的，再添加</span>

  <span class="token comment">// 去掉不在白名单上的标签</span>
  <span class="token comment">// 双 script 标签被过滤，标签内容留下</span>
  <span class="token comment">// 常规校验就开这个即可</span>
  <span class="token literal-property property">stripIgnoreTag</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

  <span class="token comment">// 双 script 标签及其内容会被全部过滤掉</span>
  <span class="token comment">// 单(注意单标签) script 标签会被替换为 [removed]  其它标签不会</span>
  <span class="token comment">// stripIgnoreTagBody: [&#39;script&#39;],</span>
  <span class="token comment">// onIgnoreTag (tag, html, options) {</span>
  <span class="token comment">//     console.log(tag)</span>
  <span class="token comment">// },</span>
  <span class="token function">escapeHtml</span> <span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 被识别为有风险的标签字符串才会进入该方法，比如不在白名单里面的标签</span>
    <span class="token comment">// 标签中的内容 也会进入 这里进入检测</span>
    <span class="token comment">// 有些情况 &lt;script&gt; 这种，默认是转义为  &amp;lt;script&amp;gt; 所以采用下面方式复写</span>
    <span class="token keyword">return</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 2. DOMPurify  https://github.com/cure53/DOMPurify 返回一个去除恶意代码后的字符串</span>
DOMPurify<span class="token punctuation">.</span><span class="token function">sanitize</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;img src=x onerror=alert(1)//&gt;&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 返回 &lt;img src=&quot;x&quot;&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>插入html时采用 .innerText .setAttribute .style 等明确方法 使用 .innerHTML、.outerHTML、document.write() 这种较为危险的方式，注意检测</p></li><li><p>注意以下情况中出现的恶意代码</p></li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&#39;恶意代码&#39;</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&#39;恶意代码&#39;</span><span class="token operator">&gt;</span>xx<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>img onclick<span class="token operator">=</span><span class="token string">&#39;恶意代码&#39;</span> onerror<span class="token operator">=</span><span class="token string">&#39;恶意代码&#39;</span> src<span class="token operator">=</span><span class="token string">&#39;恶意代码&#39;</span><span class="token operator">&gt;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">&#39;恶意代码&#39;</span><span class="token punctuation">)</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token string">&#39;恶意代码&#39;</span><span class="token punctuation">)</span>
location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&#39;恶意代码&#39;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><p>严格的 CPS 策略 参加下方</p></li><li><p>输入内容长度的控制，根据业务限制，控制输入内容的长度，可一定程度上限制xss攻击</p></li><li><p>cookit 设置 Secure; HttpOnly 防止窃取 关键的 cookie 数据</p></li><li><p>验证码</p></li><li><p>尽量不要使用 <code>onclick=&quot;data&quot;</code> 这种形式的数据绑定 容易被拼接</p></li><li><p>拼接 HTML 插入，要注意</p></li><li><p>插入属性和链接时 注意拼接问题</p></li></ol><h3 id="vue-中措施" tabindex="-1"><a class="header-anchor" href="#vue-中措施" aria-hidden="true">#</a> vue 中措施</h3><p>引用官方原话：“第一原则 永远不要使用不可信任的模板”</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> userProvidedString <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span> <span class="token comment">// 永远不要这样做</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="框架已经做了的处理" tabindex="-1"><a class="header-anchor" href="#框架已经做了的处理" aria-hidden="true">#</a> 框架已经做了的处理</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* HTML */</span>
<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> userProvidedString <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token comment">// 如果 userProvidedString 等于 &#39;&lt;script&gt;alert(&quot;hi&quot;)&lt;/script&gt;&#39;</span>
<span class="token comment">// 会被转义为 &amp;lt;script&amp;gt;alert(&amp;quot;hi&amp;quot;)&amp;lt;/script&amp;gt;</span>
<span class="token comment">// 这些转义是通过浏览器原生API 只要浏览器没有漏洞就不存在风险</span>

<span class="token comment">/* 属性 */</span>
<span class="token operator">&lt;</span>h1 v<span class="token operator">-</span>bind<span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;userProvidedString&quot;</span><span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token comment">// 如果 userProvidedString 等于 &#39;&quot; onclick=&quot;alert(\&#39;hi\&#39;)&#39;</span>
<span class="token comment">// 会被转义为 &amp;quot; onclick=&amp;quot;alert(&#39;hi&#39;)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="需要自主解决" tabindex="-1"><a class="header-anchor" href="#需要自主解决" aria-hidden="true">#</a> 需要自主解决</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 1.</span>
<span class="token operator">&lt;</span>a v<span class="token operator">-</span>bind<span class="token operator">:</span>href<span class="token operator">=</span><span class="token string">&quot;userProvidedUrl&quot;</span><span class="token operator">&gt;</span>click me<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token comment">// 这里 userProvidedUrl  是需要过滤的 否则还是可能 被注入 javascript 脚本</span>

<span class="token comment">// 2.</span>
<span class="token operator">&lt;</span>a v<span class="token operator">-</span>bind<span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;style&quot;</span><span class="token operator">&gt;</span>click me<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> style <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
<span class="token comment">// 避免用户直接渲染样式，例：登录页覆盖提交按钮，跳转到钓鱼登录页 ，骗取用户登录名和账号</span>

<span class="token comment">// 3.</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span> 
<span class="token comment">// 元素, 不允许直接渲染</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="cps" tabindex="-1"><a class="header-anchor" href="#cps" aria-hidden="true">#</a> CPS</h2><p>指令配置：https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP</p><p>Content-Security-Policy-Report-Only 允许 web 开发人员通过监测 (但不强制执行) 政策的影响来尝试政策</p><h3 id="两种使用方式" tabindex="-1"><a class="header-anchor" href="#两种使用方式" aria-hidden="true">#</a> 两种使用方式</h3><ol><li>前端直接使用</li></ol><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- 一个网站所有内容均来自站点的同一个源 (不包括其子域名) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src &#39;self&#39;;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>后端服务配置</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Nginx 配置示例</span>
add_header  Content-Security-Policy  <span class="token string">&quot;default-src &#39;self&#39;&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: warrenemb@163.com">Warren</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: heweimailbox@foxmail.com">Warren</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app-502c1dea.js" defer></script>
  </body>
</html>
